<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bettle - Eredivisie Voorspellingen</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #0F1923;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide Icons
        const Share2 = ({ className }) => (
            <svg className={className} width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="18" cy="5" r="3"></circle>
                <circle cx="6" cy="12" r="3"></circle>
                <circle cx="18" cy="19" r="3"></circle>
                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
        );

        const User = ({ className }) => (
            <svg className={className} width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
        );

        const LogOut = ({ className }) => (
            <svg className={className} width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
        );

        function BettleApp() {
            // Real Eredivisie matches for speelronde 24 (20-22 februari 2026)
            const matches = [
                { id: 1, home: 'Fortuna Sittard', away: 'Excelsior', odds: [2.20, 3.40, 3.20], date: 'Vr 20 feb, 20:00' },
                { id: 2, home: 'PSV', away: 'SC Heerenveen', odds: [1.15, 8.50, 19.00], date: 'Za 21 feb, 18:45' },
                { id: 3, home: 'NAC Breda', away: 'FC Volendam', odds: [1.95, 3.60, 3.80], date: 'Za 21 feb, 20:00' },
                { id: 4, home: 'Ajax', away: 'NEC', odds: [1.30, 6.00, 10.00], date: 'Za 21 feb, 21:00' },
                { id: 5, home: 'FC Twente', away: 'FC Groningen', odds: [1.55, 4.50, 5.50], date: 'Zo 22 feb, 12:15' },
                { id: 6, home: 'FC Utrecht', away: 'PEC Zwolle', odds: [1.75, 3.90, 4.50], date: 'Zo 22 feb, 14:30' },
                { id: 7, home: 'Go Ahead Eagles', away: 'Heracles Almelo', odds: [2.10, 3.50, 3.40], date: 'Zo 22 feb, 14:30' },
                { id: 8, home: 'AZ', away: 'Sparta Rotterdam', odds: [1.45, 4.80, 7.00], date: 'Zo 22 feb, 16:45' },
                { id: 9, home: 'Feyenoord', away: 'Telstar', odds: [1.08, 12.00, 26.00], date: 'Zo 22 feb, 20:00' },
            ];

            const [currentUser, setCurrentUser] = useState(null);
            const [view, setView] = useState('login');
            const [predictions, setPredictions] = useState({});
            const [liveScores, setLiveScores] = useState({});
            const [loading, setLoading] = useState(true);

            // Load user and their predictions
            useEffect(() => {
                try {
                    const savedUser = localStorage.getItem('bettle_current_user');
                    if (savedUser) {
                        setCurrentUser(savedUser);
                        loadUserPredictions(savedUser);
                        setView('predict');
                    }
                } catch (error) {
                    console.log('No saved user');
                }
                setLoading(false);
            }, []);

            const loadUserPredictions = (username) => {
                try {
                    const userKey = `bettle_predictions_${username}`;
                    const savedPredictions = localStorage.getItem(userKey);
                    if (savedPredictions) {
                        setPredictions(JSON.parse(savedPredictions));
                    } else {
                        setPredictions({});
                    }
                } catch (error) {
                    console.log('No predictions for this user');
                    setPredictions({});
                }
            };

            const handleLogin = (username) => {
                if (username.trim()) {
                    const cleanUsername = username.trim();
                    setCurrentUser(cleanUsername);
                    localStorage.setItem('bettle_current_user', cleanUsername);
                    loadUserPredictions(cleanUsername);
                    setView('predict');
                }
            };

            const handleLogout = () => {
                if (confirm('Weet je zeker dat je wilt uitloggen?')) {
                    setCurrentUser(null);
                    localStorage.removeItem('bettle_current_user');
                    setPredictions({});
                    setLiveScores({});
                    setView('login');
                }
            };

            const savePredictions = (newPredictions) => {
                if (currentUser) {
                    try {
                        const userKey = `bettle_predictions_${currentUser}`;
                        localStorage.setItem(userKey, JSON.stringify(newPredictions));
                    } catch (error) {
                        console.error('Failed to save predictions:', error);
                    }
                }
            };

            const handlePrediction = (matchId, prediction) => {
                const newPredictions = { ...predictions, [matchId]: prediction };
                setPredictions(newPredictions);
                savePredictions(newPredictions);
            };

            const handleLiveScore = (matchId, result) => {
                setLiveScores({ ...liveScores, [matchId]: result });
            };

            const calculateTotalOdds = () => {
                let total = 1;
                Object.keys(predictions).forEach(matchId => {
                    const match = matches.find(m => m.id === parseInt(matchId));
                    if (match) {
                        const predIndex = predictions[matchId] === '1' ? 0 : predictions[matchId] === 'X' ? 1 : 2;
                        total *= match.odds[predIndex];
                    }
                });
                return total.toFixed(2);
            };

            const getPredictionCount = () => Object.keys(predictions).length;

            const shareText = () => {
                const betText = matches
                    .filter(m => predictions[m.id])
                    .map(m => `${m.home} - ${m.away}: ${predictions[m.id]}`)
                    .join('\n');
                
                return `üéØ ${currentUser}'s Eredivisie voorspellingen (Speelronde 24)\n\n${betText}\n\nTotale odds: ${calculateTotalOdds()}\n\n‚öΩ Deel jouw voorspellingen!`;
            };

            if (loading) {
                return (
                    <div className="min-h-screen flex items-center justify-center" style={{ background: '#0F1923' }}>
                        <div className="animate-pulse text-white text-xl font-semibold">Laden...</div>
                    </div>
                );
            }

            // Login View
            if (view === 'login') {
                return (
                    <div className="min-h-screen flex items-center justify-center px-4" style={{ background: '#0F1923' }}>
                        <div className="w-full max-w-md">
                            <div className="text-center mb-8">
                                <div className="w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center" style={{ background: '#64DD17' }}>
                                    <User className="w-10 h-10 text-black" />
                                </div>
                                <h1 className="text-3xl font-bold text-white mb-2">Welkom bij Bettle</h1>
                                <p className="text-gray-400">Vul je naam in om te beginnen</p>
                            </div>

                            <div className="rounded-lg p-6" style={{ background: '#1A2332' }}>
                                <form onSubmit={(e) => {
                                    e.preventDefault();
                                    const username = e.target.username.value;
                                    handleLogin(username);
                                }}>
                                    <label className="block text-sm font-medium text-gray-300 mb-2">
                                        Jouw naam
                                    </label>
                                    <input
                                        type="text"
                                        name="username"
                                        placeholder="Bijv. Rens, Sarah, Ahmed..."
                                        className="w-full px-4 py-3 rounded-lg text-white focus:outline-none focus:ring-2 mb-4"
                                        style={{ background: '#2A3542', borderColor: '#64DD17' }}
                                        autoFocus
                                        required
                                    />
                                    
                                    <button
                                        type="submit"
                                        className="w-full font-bold py-3 px-6 rounded-lg transition-all hover:brightness-110"
                                        style={{ background: '#64DD17', color: '#000' }}
                                    >
                                        Start met voorspellen
                                    </button>
                                </form>

                                <div className="mt-6 pt-6 border-t" style={{ borderColor: '#2A3542' }}>
                                    <p className="text-xs text-gray-400 text-center">
                                        üí° Je voorspellingen worden alleen op dit apparaat opgeslagen
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // Predict View
            if (view === 'predict') {
                return (
                    <div className="min-h-screen pb-32" style={{ background: '#0F1923' }}>
                        <div className="max-w-4xl mx-auto px-4 py-6">
                            {/* Header with user info */}
                            <div className="mb-6 flex items-center justify-between">
                                <div>
                                    <div className="flex items-center gap-2 mb-2">
                                        <h1 className="text-2xl font-bold text-white">Eredivisie</h1>
                                        <span className="px-2 py-1 rounded text-xs font-semibold" style={{ background: '#64DD17', color: '#000' }}>
                                            Speelronde 24
                                        </span>
                                    </div>
                                    <div className="text-sm text-gray-400">20-22 februari 2026</div>
                                </div>
                                
                                <div className="text-right">
                                    <div className="flex items-center gap-2 justify-end mb-1">
                                        <User className="w-4 h-4 text-gray-400" />
                                        <span className="text-white font-semibold">{currentUser}</span>
                                    </div>
                                    <button
                                        onClick={handleLogout}
                                        className="text-xs text-gray-400 hover:text-white flex items-center gap-1 ml-auto"
                                    >
                                        <LogOut className="w-3 h-3" />
                                        Uitloggen
                                    </button>
                                </div>
                            </div>

                            {/* Matches List */}
                            <div className="space-y-3 mb-6">
                                {matches.map((match) => (
                                    <div 
                                        key={match.id} 
                                        className="rounded-lg overflow-hidden"
                                        style={{ background: '#1A2332' }}
                                    >
                                        <div className="px-4 py-2 border-b" style={{ borderColor: '#2A3542' }}>
                                            <div className="text-xs text-gray-400">{match.date}</div>
                                        </div>
                                        
                                        <div className="p-4">
                                            <div className="flex items-center justify-between">
                                                <div className="flex-1 pr-4">
                                                    <div className="text-white font-medium text-sm mb-1">{match.home}</div>
                                                    <div className="text-white font-medium text-sm">{match.away}</div>
                                                </div>
                                                
                                                <div className="flex gap-2">
                                                    <div className="text-center">
                                                        <div className="text-xs text-gray-400 mb-1">1</div>
                                                        <button
                                                            onClick={() => handlePrediction(match.id, '1')}
                                                            className={`w-16 h-12 rounded font-bold text-sm transition-all ${
                                                                predictions[match.id] === '1'
                                                                    ? 'text-black shadow-lg'
                                                                    : 'text-white hover:brightness-110'
                                                            }`}
                                                            style={{
                                                                background: predictions[match.id] === '1' ? '#64DD17' : '#2A3542'
                                                            }}
                                                        >
                                                            {match.odds[0].toFixed(2)}
                                                        </button>
                                                    </div>
                                                    
                                                    <div className="text-center">
                                                        <div className="text-xs text-gray-400 mb-1">X</div>
                                                        <button
                                                            onClick={() => handlePrediction(match.id, 'X')}
                                                            className={`w-16 h-12 rounded font-bold text-sm transition-all ${
                                                                predictions[match.id] === 'X'
                                                                    ? 'text-black shadow-lg'
                                                                    : 'text-white hover:brightness-110'
                                                            }`}
                                                            style={{
                                                                background: predictions[match.id] === 'X' ? '#64DD17' : '#2A3542'
                                                            }}
                                                        >
                                                            {match.odds[1].toFixed(2)}
                                                        </button>
                                                    </div>
                                                    
                                                    <div className="text-center">
                                                        <div className="text-xs text-gray-400 mb-1">2</div>
                                                        <button
                                                            onClick={() => handlePrediction(match.id, '2')}
                                                            className={`w-16 h-12 rounded font-bold text-sm transition-all ${
                                                                predictions[match.id] === '2'
                                                                    ? 'text-black shadow-lg'
                                                                    : 'text-white hover:brightness-110'
                                                            }`}
                                                            style={{
                                                                background: predictions[match.id] === '2' ? '#64DD17' : '#2A3542'
                                                            }}
                                                        >
                                                            {match.odds[2].toFixed(2)}
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            {/* Total Odds - Fixed at bottom */}
                            {getPredictionCount() > 0 && (
                                <div className="fixed bottom-0 left-0 right-0 p-4" style={{ background: '#1A2332', borderTop: '1px solid #2A3542' }}>
                                    <div className="max-w-4xl mx-auto">
                                        <div className="flex items-center justify-between mb-3">
                                            <div>
                                                <div className="text-white font-semibold">Totale odds</div>
                                                <div className="text-xs text-gray-400">{getPredictionCount()} {getPredictionCount() === 1 ? 'wedstrijd' : 'wedstrijden'} geselecteerd</div>
                                            </div>
                                            <div className="text-3xl font-bold" style={{ color: '#64DD17' }}>
                                                {calculateTotalOdds()}
                                            </div>
                                        </div>
                                        
                                        <div className="flex gap-3">
                                            <button
                                                onClick={() => setView('share')}
                                                className="flex-1 font-bold py-3 px-6 rounded-lg transition-all hover:brightness-110 flex items-center justify-center gap-2"
                                                style={{ background: '#64DD17', color: '#000' }}
                                            >
                                                <Share2 />
                                                Deel voorspelling
                                            </button>
                                            
                                            <button
                                                onClick={() => setView('live')}
                                                className="flex-1 font-bold py-3 px-6 rounded-lg transition-all text-white"
                                                style={{ background: '#2A3542' }}
                                            >
                                                Live scores
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            // Share View
            if (view === 'share') {
                return (
                    <div className="min-h-screen" style={{ background: '#0F1923' }}>
                        <div className="max-w-4xl mx-auto px-4 py-6">
                            <div className="mb-6">
                                <button
                                    onClick={() => setView('predict')}
                                    className="text-gray-400 hover:text-white mb-4 flex items-center gap-2"
                                >
                                    ‚Üê Terug
                                </button>
                                <h1 className="text-2xl font-bold text-white mb-2">{currentUser}'s voorspellingen</h1>
                                <div className="text-sm text-gray-400">Speelronde 24 ‚Ä¢ {getPredictionCount()} wedstrijden</div>
                            </div>

                            <div className="space-y-3 mb-24">
                                {matches.map((match) => {
                                    const pred = predictions[match.id];
                                    if (!pred) return null;
                                    
                                    return (
                                        <div 
                                            key={match.id} 
                                            className="rounded-lg overflow-hidden"
                                            style={{ background: '#1A2332' }}
                                        >
                                            <div className="px-4 py-2 border-b" style={{ borderColor: '#2A3542' }}>
                                                <div className="text-xs text-gray-400">{match.date}</div>
                                            </div>
                                            
                                            <div className="p-4">
                                                <div className="flex items-center justify-between">
                                                    <div className="flex-1">
                                                        <div className="text-white font-medium text-sm mb-1">{match.home}</div>
                                                        <div className="text-white font-medium text-sm">{match.away}</div>
                                                    </div>
                                                    
                                                    <div className="flex gap-2">
                                                        {['1', 'X', '2'].map((p, idx) => (
                                                            <div key={p} className="text-center">
                                                                <div className="text-xs text-gray-400 mb-1">{p}</div>
                                                                <div
                                                                    className={`w-16 h-12 rounded flex items-center justify-center font-bold text-sm ${
                                                                        pred === p ? 'text-black' : 'text-gray-600'
                                                                    }`}
                                                                    style={{
                                                                        background: pred === p ? '#64DD17' : '#2A3542'
                                                                    }}
                                                                >
                                                                    {pred === p ? match.odds[idx].toFixed(2) : '-'}
                                                                </div>
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>

                            <div className="fixed bottom-0 left-0 right-0 p-4" style={{ background: '#1A2332', borderTop: '1px solid #2A3542' }}>
                                <div className="max-w-4xl mx-auto">
                                    <div className="flex items-center justify-between mb-3">
                                        <div className="text-white font-semibold">Totale odds</div>
                                        <div className="text-3xl font-bold" style={{ color: '#64DD17' }}>
                                            {calculateTotalOdds()}
                                        </div>
                                    </div>
                                    
                                    <button
                                        onClick={() => {
                                            navigator.clipboard.writeText(shareText());
                                            alert('Voorspelling gekopieerd! Plak in WhatsApp of social media.');
                                        }}
                                        className="w-full font-bold py-3 px-6 rounded-lg transition-all hover:brightness-110 flex items-center justify-center gap-2"
                                        style={{ background: '#64DD17', color: '#000' }}
                                    >
                                        <Share2 />
                                        Kopieer en deel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // Live Scores View
            if (view === 'live') {
                return (
                    <div className="min-h-screen" style={{ background: '#0F1923' }}>
                        <div className="max-w-4xl mx-auto px-4 py-6 pb-32">
                            <div className="mb-6">
                                <button
                                    onClick={() => setView('predict')}
                                    className="text-gray-400 hover:text-white mb-4 flex items-center gap-2"
                                >
                                    ‚Üê Terug
                                </button>
                                <h1 className="text-2xl font-bold text-white mb-2">Live scores</h1>
                                <div className="text-sm text-gray-400">Vul de resultaten in</div>
                            </div>

                            <div className="space-y-3">
                                {matches.map((match) => {
                                    const pred = predictions[match.id];
                                    const score = liveScores[match.id];
                                    if (!pred) return null;

                                    const isCorrect = score === pred;
                                    const hasScore = score !== undefined;
                                    
                                    return (
                                        <div 
                                            key={match.id} 
                                            className="rounded-lg overflow-hidden"
                                            style={{ 
                                                background: hasScore 
                                                    ? isCorrect 
                                                        ? 'rgba(100, 221, 23, 0.1)' 
                                                        : 'rgba(239, 68, 68, 0.1)'
                                                    : '#1A2332',
                                                border: hasScore 
                                                    ? `2px solid ${isCorrect ? '#64DD17' : '#EF4444'}`
                                                    : 'none'
                                            }}
                                        >
                                            <div className="px-4 py-2 border-b" style={{ borderColor: '#2A3542' }}>
                                                <div className="flex items-center justify-between">
                                                    <div className="text-xs text-gray-400">{match.date}</div>
                                                    {hasScore && (
                                                        <div className={`text-xs font-semibold ${isCorrect ? 'text-green-400' : 'text-red-400'}`}>
                                                            {isCorrect ? '‚úì Correct' : '‚úó Fout'}
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            
                                            <div className="p-4">
                                                <div className="flex items-center justify-between mb-3">
                                                    <div className="flex-1">
                                                        <div className="text-white font-medium text-sm mb-1">{match.home}</div>
                                                        <div className="text-white font-medium text-sm">{match.away}</div>
                                                    </div>
                                                    
                                                    <div className="flex gap-2">
                                                        {['1', 'X', '2'].map((p) => (
                                                            <div key={p} className="text-center">
                                                                <div className="text-xs text-gray-400 mb-1">{p}</div>
                                                                <div
                                                                    className={`w-16 h-12 rounded flex items-center justify-center font-bold text-sm ${
                                                                        pred === p 
                                                                            ? hasScore
                                                                                ? isCorrect
                                                                                    ? 'text-black'
                                                                                    : 'text-white'
                                                                                : 'text-black'
                                                                            : 'text-gray-600'
                                                                    }`}
                                                                    style={{
                                                                        background: pred === p
                                                                            ? hasScore
                                                                                ? isCorrect
                                                                                    ? '#64DD17'
                                                                                    : '#EF4444'
                                                                                : '#64DD17'
                                                                            : '#2A3542'
                                                                    }}
                                                                >
                                                                    {pred === p ? '‚úì' : ''}
                                                                </div>
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>
                                                
                                                <select
                                                    value={score || ''}
                                                    onChange={(e) => handleLiveScore(match.id, e.target.value)}
                                                    className="w-full rounded px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-green-500"
                                                    style={{ background: '#2A3542' }}
                                                >
                                                    <option value="">Selecteer resultaat...</option>
                                                    <option value="1">Thuiswinst (1)</option>
                                                    <option value="X">Gelijkspel (X)</option>
                                                    <option value="2">Uitwinst (2)</option>
                                                </select>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>

                            <div className="fixed bottom-0 left-0 right-0 p-4" style={{ background: '#1A2332', borderTop: '1px solid #2A3542' }}>
                                <div className="max-w-4xl mx-auto">
                                    <div className="flex items-center justify-between mb-3">
                                        <div>
                                            <div className="text-white font-semibold">Score</div>
                                            <div className="text-xs text-gray-400">
                                                {Object.keys(liveScores).filter(id => predictions[id] === liveScores[id]).length} van {getPredictionCount()} correct
                                            </div>
                                        </div>
                                        <div className="text-right">
                                            <div className="text-2xl font-bold" style={{ color: '#64DD17' }}>
                                                {Object.keys(liveScores).filter(id => predictions[id] === liveScores[id]).length}/{getPredictionCount()}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <button
                                        onClick={() => {
                                            const scoreText = matches
                                                .filter(m => predictions[m.id])
                                                .map(m => {
                                                    const score = liveScores[m.id];
                                                    const emoji = score ? (predictions[m.id] === score ? '‚úÖ' : '‚ùå') : '‚è≥';
                                                    return `${emoji} ${m.home} - ${m.away}: ${predictions[m.id]}`;
                                                })
                                                .join('\n');
                                            
                                            const correct = Object.keys(liveScores).filter(id => predictions[id] === liveScores[id]).length;
                                            const fullText = `üéØ ${currentUser}'s Eredivisie Resultaten (Speelronde 24)\n\n${scoreText}\n\nüìä Score: ${correct}/${getPredictionCount()} correct\nüí∞ Totale odds: ${calculateTotalOdds()}`;
                                            
                                            navigator.clipboard.writeText(fullText);
                                            alert('Resultaten gekopieerd!');
                                        }}
                                        className="w-full font-bold py-3 px-6 rounded-lg transition-all hover:brightness-110"
                                        style={{ background: '#64DD17', color: '#000' }}
                                    >
                                        Deel resultaten
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return null;
        }

        ReactDOM.render(<BettleApp />, document.getElementById('root'));
    </script>
</body>
</html>